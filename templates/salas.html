<!DOCTYPE html>
<html lang="pt-BR">

<head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Salas</title>
        <link rel="stylesheet" href="{{ url_for('static', filename='css/global.css') }}">
        <link rel="stylesheet"
                href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
        <link rel="stylesheet" href="{{ url_for('static', filename='css/salas.css') }}">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"
                rel="stylesheet">
</head>

<body>
        <button id="btnVoltar" onclick="window.location.href='/'"><span
                        class="material-symbols-outlined">undo</span></button>
        <div class="container">
                <div class="title-container">
                        <img id="logo" src="{{ url_for('static', filename='img/logo.svg') }}" alt="logo">
                        <h1 class="title">Selecione a sala</h1>
                </div>

                <div class="filter-container">
                        <input type="text" id="searchInput" class="search-input" placeholder="Digite o nome da sala...">
                        <div class="pcd-option">
                                <p>É PCD?</p>
                                <input id="isPCD" type="checkbox" class="pcd-check">
                        </div>
                </div>
        </div>

        <div id="container_predios">
                <div class="container-andar">
                        <h1 class="predio-title">Prédio Principal</h1>
                        <h2 class="andar-title" data-group="terreo">Terreo</h2>
                        <div class="botoesDestino" data-group="terreo">
                                <button onclick="verRota('TI')" class="botao">TI<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('Xerox')" class="botao">Xerox<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('Capela')" class="botao">Capela<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('Pastoral')" class="botao">Pastoral<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('Diretoria')" class="botao">Diretoria<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('Lab. AutoCad')" class="botao">Lab. AutoCad<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('Sala Prof. 1')" class="botao">Sala Prof. 1<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('Sala Prof. 2')" class="botao">Sala Prof. 2<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('WC/Vest. M')" class="botao">WC/Vest. M<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('WC/Vest. F')" class="botao">WC/Vest. F<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('Ref./Cantina')" class="botao">Ref./Cantina<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('WC Familia')" class="botao">WC Familia<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('Sala Prof.')" class="botao">Sala Prof.<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('Biblioteca')" class="botao">Biblioteca<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('Cant. Leitura')" class="botao">Cant. Leitura<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('Coordenação')" class="botao">Coordenação<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('Secretaria')" class="botao">Secretaria<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('Social')" class="botao">Social<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('Sala Estágio')" class="botao">Sala Estágio<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('WC Cantina')" class="botao">WC Cantina<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('Sala Arquivo')" class="botao">Sala Arquivo<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('Entrada Prédio M.B.')" class="botao">Prédio M.B.<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('Estacionamento')" class="botao">Estacionamento<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                        </div>

                        <h2 class="andar-title" data-group="primeiro">Primeiro Andar</h2>
                        <div class="botoesDestino" data-group="primeiro">
                                <button onclick="verRota('Sala Infra')" class="botao">Sala Infra<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('Salão do Juri')" class="botao">Salão do Juri<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('Lab.03')" class="botao">Lab.03<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('Lab.04')" class="botao">Lab.04<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('Lab.05')" class="botao">Lab.05<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('Lab.06')" class="botao">Lab.06<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('Sala C2')" class="botao">Sala C2<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('Sala C3')" class="botao">Sala C3<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('Sala C4')" class="botao">Sala C4<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('Obs. V.E.')" class="botao">Obs. V.E.<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('Sala E2')" class="botao">Sala E2<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('Sala E3')" class="botao">Sala E3<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('Sala E4')" class="botao">Sala E4<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('Sala E5')" class="botao">Sala E5<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('DD102')" class="botao">DD102<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('DD103')" class="botao">DD103<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('DD104')" class="botao">DD104<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('DD105')" class="botao">DD105<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('DD106')" class="botao">DD106<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('DD107')" class="botao">DD107<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('DD109')" class="botao">DD109<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('Audio Visual')" class="botao">Audio Visual<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('Banheiro F')" class="botao">Banheiro F<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('Banheiro M')" class="botao">Banheiro M<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('Auditoria')" class="botao">Auditoria<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                        </div>
                        <!-- </div>

                <div class="container-andar"> -->
                        <h1 class="predio-title">Prédio Mario Bonatti</h1>
                        <h2 class="andar-title" data-group="terreoBT">Térreo</h2>
                        <div class="botoesDestino" data-group="terreoBT">
                                <button onclick="verRota('Oficina/Aero Unisal')" class="botao">AeroUnisal
                                        <span class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('Lab. Mec./Projeto')" class="botao">Projeto
                                        <span class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('Lab. Mecanica')" class="botao">Lab. Mecanica
                                        <span class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('Lab. Civil')" class="botao">Lab. Civil
                                        <span class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('Banheiros')" class="botao">Banheiros
                                        <span class="material-symbols-outlined icon">pin_drop</span></button>

                        </div>

                        <h2 class="andar-title" data-group="primeiroBT">Primeiro Andar Mario Bonatti</h2>
                        <div class="botoesDestino" data-group="primeiroBT">
                                <button onclick="verRota('LMI')" class="botao">LMI<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('MB07')" class="botao">MB07<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('MB08')" class="botao">MB08<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('MB09')" class="botao">MB09<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('Banheiros 1')" class="botao">Banheiros 1<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                        </div>

                        <h2 class="andar-title" data-group="segundoBT">Segundo Andar Mario Bonatti</h2>
                        <div class="botoesDestino" data-group="segundoBT">
                                <button onclick="verRota('MB01')" class="botao">MB01<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('MB02')" class="botao">MB02<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('MB03')" class="botao">MB03<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('MB04')" class="botao">MB04<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('MB05/MB06')" class="botao">MB05/MB06<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                                <button onclick="verRota('Banheiros 2')" class="botao">Banheiros 2<span
                                                class="material-symbols-outlined icon">pin_drop</span></button>
                        </div>
                </div>
        </div>
        </div>

        <footer>
                <button id="infoButton">?</button>
        </footer>


        <script>
                function verRota(destino) {
                        const isPCD = document.getElementById('isPCD').checked;
                        const formData = new FormData();
                        formData.append('destino', destino);
                        formData.append('pcd', isPCD);
                        fetch('/rota', {
                                method: 'POST',
                                body: formData
                        })
                                .then(response => response.json())
                                .then(data => {
                                        // Armazenar a rota e as arestas no localStorage
                                        localStorage.setItem('rota', JSON.stringify(data.rota));
                                        localStorage.setItem('arestas', JSON.stringify(data.arestas)); // Armazenar arestas
                                        localStorage.setItem('andares', JSON.stringify(data.andares));
                                        localStorage.setItem('destino', destino);
                                        localStorage.setItem('pcd', isPCD);
                                        // Redirecionar para a página de rota
                                        window.location.href = '/rota';

                                });
                }

                document.getElementById('searchInput').addEventListener('input', function () {
                        const searchValue = this.value.toLowerCase();
                        const containers = document.querySelectorAll('.botoesDestino'); // Corrigido para a classe correta

                        const groupVisibility = {};

                        containers.forEach(container => {
                                const group = container.getAttribute('data-group');

                                const buttons = container.querySelectorAll('.botao');
                                let visibleButtons = 0;

                                buttons.forEach(button => {
                                        const buttonText = button.textContent.toLowerCase();

                                        if (buttonText.includes(searchValue)) {
                                                button.style.display = 'grid';
                                                visibleButtons++;
                                        } else {
                                                button.style.display = 'none';
                                        }
                                });

                                if (visibleButtons === 0) {
                                        container.style.display = 'none'; // Oculta o container se não houver botões visíveis
                                        groupVisibility[group] = false; // Registra que não há visibilidade para o grupo
                                } else {
                                        container.style.display = 'grid'; // Mostra o container se houver botões visíveis
                                        groupVisibility[group] = true; // Registra que há visibilidade para o grupo
                                }
                        });

                        const titles = document.querySelectorAll('.andar-title');
                        titles.forEach(title => {
                                const group = title.getAttribute('data-group');
                                if (groupVisibility[group]) {
                                        title.style.display = 'grid'; // Mostra o título se houver botões visíveis
                                } else {
                                        title.style.display = 'none'; // Oculta o título se não houver botões visíveis
                                }
                        });
                });


        </script>
</body>

</html>